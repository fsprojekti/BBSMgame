(this.webpackJsonpreminder=this.webpackJsonpreminder||[]).push([[0],{292:function(e,t,a){e.exports=a.p+"static/media/balance.6040daaf.png"},293:function(e,t,a){e.exports=a.p+"static/media/stake.70483a2e.png"},294:function(e,t,a){e.exports=a.p+"static/media/login.9a76e74e.svg"},324:function(e,t,a){e.exports=a(503)},329:function(e,t,a){},503:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(129),l=a.n(c),i=(a(329),a(43)),o=a(12),s=a(3),u=a.n(s),m=a(5),p=a(6),d=a(91),f=a(22),v=r.a.createContext(),b=function(e){var t=e.children,a=Object(n.useState)(!1),c=Object(p.a)(a,2),l=c[0],i=c[1],o=Object(n.useState)(!1),s=Object(p.a)(o,2),u=s[0],m=s[1],d=Object(n.useState)(!1),f=Object(p.a)(d,2),b=f[0],E=f[1],h=Object(n.useState)(!1),g=Object(p.a)(h,2),y=g[0],O=g[1],k=Object(n.useState)(!1),x=Object(p.a)(k,2),j=x[0],S=x[1],N=Object(n.useState)(!1),w=Object(p.a)(N,2),C=w[0],I=w[1],T=Object(n.useState)(!1),F=Object(p.a)(T,2),_=F[0],M=F[1],A=Object(n.useState)(""),D=Object(p.a)(A,2),P=D[0],U=D[1],B=Object(n.useState)(""),R=Object(p.a)(B,2),L=R[0],z=R[1],G=Object(n.useState)(""),H=Object(p.a)(G,2),W=H[0],Y=H[1],V=Object(n.useState)(""),q=Object(p.a)(V,2),K=q[0],J=q[1],X=Object(n.useState)({token:void 0,player:void 0,otherPrices:void 0,pendingTrades:void 0,requestedTrades:void 0,allPendingTransactions:void 0,totalStake:void 0}),Q=Object(p.a)(X,2),Z=Q[0],$=Q[1];return r.a.createElement(v.Provider,{value:{isGameOn:l,setIsGameOn:i,gameData:Z,setGameData:$,clearGameData:function(){$({token:void 0,player:void 0,otherPrices:void 0,pendingTrades:void 0,requestedTrades:void 0,allPendingTransactions:void 0,totalStake:void 0})},modalContent:P,setModalContent:U,openConfirmModal:function(){m(!0)},closeConfirmModal:function(){m(!1)},confirmModalContent:L,setConfirmModalContent:z,isConfirmModalOpen:u,openStakeModal:function(){E(!0)},closeStakeModal:function(){E(!1)},isStakeModalOpen:b,openTradeModal:function(){O(!0)},closeTradeModal:function(){O(!1)},tradeModalContent:W,setTradeModalContent:Y,isTradeModalOpen:y,openCancelOrderModal:function(){S(!0)},closeCancelOrderModal:function(){S(!1)},cancelOrderModalContent:K,setCancelOrderModalContent:J,isCancelOrderModalOpen:j,openCreateOrderModal:function(){I(!0)},closeCreateOrderModal:function(){I(!1)},isCreateOrderModalOpen:C,isAlertOpen:_,openAlert:function(){M(!0)},closeAlert:function(){M(!1)}}},t)},E=function(){return Object(n.useContext)(v)},h=a(290);function g(){var e=E(),t=e.gameData,a=e.clearGameData,n=Object(f.f)();return r.a.createElement("nav",null,t.player?r.a.createElement("button",{className:"nav-btn",onClick:function(){a(),localStorage.setItem("auth-token",""),localStorage.setItem("playerId",""),window.location.reload(!1)}},"Log out"):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"nav-btn",onClick:function(){return n.push("/login")}},"Log in")))}var y=function(){var e=E(),t=e.isAlertOpen,a=e.closeAlert;return Object(n.useEffect)((function(){var e=setTimeout((function(){a()}),1e4);return function(){return clearTimeout(e)}}),[t]),r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-center"},r.a.createElement("div",{className:"nav-header"},r.a.createElement("div",null,r.a.createElement("h2",{className:"nav-heading"},r.a.createElement("a",{href:"/"},"SharedManufacturing"))),r.a.createElement("div",null,t?r.a.createElement("div",{className:"event-alert"},r.a.createElement("p",null,"Your order was canceled!")):r.a.createElement(r.a.Fragment,null)),r.a.createElement("div",{className:"nav-links-container"},r.a.createElement("ul",null,r.a.createElement(g,null))))))},O=a(15),k=[{id:1,url:"/",text:"Home",icon:r.a.createElement(O.f,null)},{id:2,url:"/trade",text:"Trade",icon:r.a.createElement(O.i,null)},{id:3,url:"/blockchain",text:"Blockchain",icon:r.a.createElement(O.e,null)},{id:4,url:"/ranking",text:"Ranking",icon:r.a.createElement(O.d,null)}],x=a(29),j=a.n(x),S=function(){var e=E(),t=e.gameData,a=e.isCreateOrderModalOpen,c=e.closeCreateOrderModal,l=Object(n.useState)("0"),i=Object(p.a)(l,2),o=i[0],s=i[1],d=Object(n.useState)(!1),f=Object(p.a)(d,2),v=f[0],b=f[1],h=Object(n.useState)(""),g=Object(p.a)(h,2),y=g[0],k=g[1],x=function(){var e=Object(m.a)(u.a.mark((function e(){var a,n,r,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,void 0!==o&&""!==o){e.next=6;break}k("You must enter a value"),b(!0),e.next=38;break;case 6:if(!(isNaN(o)||o<0)){e.next=11;break}k("Input must be a non-negative number"),b(!0),e.next=38;break;case 11:if(i=o,!((Math.floor(i).toString()===i?0:i.toString().split(".")[1].length||0)>0)){e.next=16;break}k("Input value must be an integer"),b(!0),e.next=38;break;case 16:if(!(parseInt(o)>3e4)){e.next=21;break}k("Maximum price in this game is 30000"),b(!0),e.next=38;break;case 21:if(0!==t.player.amountOfAvailableService){e.next=26;break}k("Amount of available services is too low"),b(!0),e.next=38;break;case 26:return a=localStorage.getItem("auth-token"),n=localStorage.getItem("playerId"),r={amountOfService:1,price:o},l={headers:{Authorization:"Bearer "+a}},e.next=32,j.a.post("/player/createOrder/".concat(n),r,l);case 32:e.sent,c(),k(""),b(!1),s("0"),document.getElementById("priceInput").value="";case 38:e.next=43;break;case 40:e.prev=40,e.t0=e.catch(0),void 0!==e.t0.response&&"Trade already exists"===e.t0.response.data.message&&(k("Trade with this person already exists"),b(!0));case 43:case"end":return e.stop()}var i}),e,null,[[0,40]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{""===t.target.value?s("0"):s(t.target.value)}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{"Enter"===t.key&&x()}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"".concat(a?"modal-confirm-overlay show-modal-confirm":"modal-confirm-overlay")},r.a.createElement("div",{className:"modal-confirm-container"},r.a.createElement("h3",null,"Set Price"),r.a.createElement("div",{className:"modal-input-group"},r.a.createElement("label",{htmlFor:"price"},"Price"),r.a.createElement("div",{className:"modal-input-group-container"},r.a.createElement("input",{type:"text",name:"price",id:"priceInput",placeholder:"Enter price",onChange:function(e){return S(e)},onKeyPress:function(e){return N(e)}}))),r.a.createElement("div",{className:"".concat(v?"modal-input-alert show-modal-input-alert":"modal-input-alert")},y),r.a.createElement("button",{className:"close-modal-btn",onClick:function(){c(),k(""),b(!1),s(),document.getElementById("priceInput").value=""}},r.a.createElement(O.h,null)),r.a.createElement("button",{className:"confirm-modal-btn",onClick:x},"Confirm")))},N=function(){var e=E(),t=e.gameData,a=e.openCreateOrderModal,c=Object(n.useState)(!1),l=Object(p.a)(c,2),i=l[0],o=l[1],s=Object(n.useState)(0),f=Object(p.a)(s,2),v=f[0],b=f[1],h=Object(n.useState)([]),g=Object(p.a)(h,2),y=g[0],x=g[1],j=function(){var e=Object(m.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.orders.filter((function(e){return e.provider===t.player._id})),o(!Array.isArray(a)||!a.length);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){j();var e=(t.player.stake/t.totalStake*100).toFixed(1);b(e),function(){var e=Object(m.a)(u.a.mark((function e(){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.players.sort((function(e,t){return parseInt(t.upgradeNumber)===parseInt(e.upgradeNumber)?parseInt(t.balance)+parseInt(t.stake)-(parseInt(e.balance)+parseInt(e.stake)):parseInt(t.upgradeNumber)-parseInt(e.upgradeNumber)}));case 2:return a=e.sent,e.next=5,a.slice(0,5);case 5:n=e.sent,x(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t]),r.a.createElement("div",null,r.a.createElement("div",{className:"sidebar"},r.a.createElement("ul",{className:"sidebar-links"},k.map((function(e){var t=e.id,a=e.url,n=e.text,c=e.icon;return r.a.createElement("li",{key:t},r.a.createElement(d.b,{to:a},c,n))})))),r.a.createElement("div",{className:"stats-sidebar"},r.a.createElement("h3",null,"Stats"),r.a.createElement("div",{className:"stats-sidebar-values"},r.a.createElement("div",{className:"stats-sidebar-values-stat"},r.a.createElement(O.g,{style:{color:"green",fontSize:"22px"}}),r.a.createElement("h4",null,t.player.balance)),r.a.createElement("div",{className:"stats-sidebar-values-stat"},r.a.createElement(O.c,{style:{color:"#38aaff",fontSize:"22px"}}),r.a.createElement("h4",{style:1===t.player.amountOfAvailableService?{color:"forestgreen",fontSize:"18px"}:{color:"darkred",fontSize:"18px"}},1===t.player.amountOfAvailableService?"AVAILABLE":"UNAVAILABLE")),r.a.createElement("div",{className:"stats-sidebar-values-stat"},r.a.createElement(O.e,{style:{color:"#ffba72",fontSize:"22px"}}),r.a.createElement("h4",null,t.player.stake," (",v,"%)")),r.a.createElement("hr",null),r.a.createElement("div",{className:"stats-sidebar-values-stat"},r.a.createElement("h4",null,"Number of upgrades: ",t.player.upgradeNumber)),r.a.createElement("div",{className:"stats-sidebar-other-services"},r.a.createElement("div",{className:"".concat(t.player.amountOfOtherService1>0?"stats-sidebar-container-green":"stats-sidebar-container-red")},r.a.createElement("h4",null,t.player.typeOfOtherService1)),r.a.createElement("div",{className:"".concat(t.player.amountOfOtherService1>0?"stats-sidebar-container-green":"stats-sidebar-container-red")},r.a.createElement("h4",null,t.player.amountOfOtherService1))),r.a.createElement("div",{className:"stats-sidebar-other-services"},r.a.createElement("div",{className:"".concat(t.player.amountOfOtherService2>0?"stats-sidebar-container-green":"stats-sidebar-container-red")},r.a.createElement("h4",null,t.player.typeOfOtherService2)),r.a.createElement("div",{className:"".concat(t.player.amountOfOtherService2>0?"stats-sidebar-container-green":"stats-sidebar-container-red")},r.a.createElement("h4",null,t.player.amountOfOtherService2))))),r.a.createElement("div",{className:"create-order-container"},1===t.player.amountOfAvailableService&&i?r.a.createElement("button",{className:"create-order-btn",onClick:a},"Set Price"):""),r.a.createElement("div",{className:"ranking-sidebar"},r.a.createElement("h3",null,"Top 5 players"),r.a.createElement("table",{className:"table-all-rankings"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Rank"),r.a.createElement("th",null,"Player"),r.a.createElement("th",null,"Number of upgrades"))),r.a.createElement("tbody",null,y.map((function(e,a){return r.a.createElement("tr",{key:e._id,style:{background:"".concat(e.playerName===t.player.playerName?"#fffd6c":"")}},r.a.createElement("td",null,r.a.createElement("strong",null,a+1)),r.a.createElement("td",null,e.playerName),r.a.createElement("td",null,e.upgradeNumber))}))))),r.a.createElement(S,null))},w=function(){var e=E().modalContent;return r.a.createElement("div",{className:"modal-overlay"},r.a.createElement("div",{className:"modal-container"},r.a.createElement("h2",null,e)))},C=a(292),I=a.n(C),T=a(293),F=a.n(T),_=function(){var e=E().gameData,t=Object(n.useState)(0),a=Object(p.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(0),o=Object(p.a)(i,2),s=o[0],d=o[1];function f(e){var t=new Date(1e3*Math.round(e/1e3));return 0===t.getUTCMinutes()?t.getUTCSeconds()+"s":t.getUTCMinutes()+"min "+t.getUTCSeconds()+"s"}return function(e,t){var a=Object(n.useRef)();Object(n.useEffect)((function(){a.current=e}),[e]),Object(n.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return function(){return clearInterval(e)}}}),[t])}(Object(m.a)(u.a.mark((function t(){var a,n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.player.amountOfAvailableService){t.next=10;break}return t.next=3,e.services.filter((function(t){return t.provider===e.player._id}));case 3:a=t.sent,n=Math.floor((Date.now()-a[0].serviceTimestamp)/a[0].timeForService*100),l(n),r=a[0].timeForService-(Date.now()-a[0].serviceTimestamp),d(f(r)),t.next=11;break;case 10:l(100);case 11:case"end":return t.stop()}}),t)}))),50),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"time-container"},r.a.createElement("div",{className:"bar-container"},r.a.createElement("div",{className:"bar-filler",style:{width:"".concat(c,"%")}},r.a.createElement("span",{className:"bar-label"},"".concat(c,"%"))),r.a.createElement("div",{className:"bottom"},1===e.player.amountOfAvailableService?r.a.createElement("p",null,"Time for service = ",f(e.player.timeForService)):r.a.createElement("p",null,"Time left = ",s),r.a.createElement("i",null)))))},M=a(135),A=function(e){var t=e.item,a=t.id,c=t.consumer,l=t.provider,i=t.typeOfService,o=t.serviceTimestamp,s=t.timeForService,d=E().gameData,f=Object(n.useState)(0),v=Object(p.a)(f,2),b=v[0],h=v[1],g=Object(n.useState)(0),y=Object(p.a)(g,2),O=y[0],k=y[1];function x(e){var t=new Date(1e3*Math.round(e/1e3));return 0===t.getUTCMinutes()?t.getUTCSeconds()+"s":t.getUTCMinutes()+"min "+t.getUTCSeconds()+"s"}return function(e,t){var a=Object(n.useRef)();Object(n.useEffect)((function(){a.current=e}),[e]),Object(n.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return function(){return clearInterval(e)}}}),[t])}(Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Math.floor((Date.now()-d.player.serviceTimestamp)/d.player.timeForService*100),h(t),function(){var e=Object(m.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s-(Date.now()-o),e.next=3,Math.floor((Date.now()-o)/s*100);case 3:((a=e.sent)<0||t<0)&&(a=0,t=0),k(x(t)),h(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()();case 4:case"end":return e.stop()}}),e)}))),50),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"service-container","data-tip":!0,"data-for":a},r.a.createElement("p",null,i),r.a.createElement("div",{id:"divSpinner",className:"spinner-loading"},r.a.createElement("div",{className:"loading-text"},b,"%")),r.a.createElement(M.a,{id:a,place:"right",type:"dark",effect:"solid"},r.a.createElement("ul",null,r.a.createElement("li",null,"Consumer: ",c),r.a.createElement("li",null,"Provider: ",l),r.a.createElement("li",null,"Time left: ",O)))))},D=function(){var e=E().gameData,t=Object(n.useState)(0),a=Object(p.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)([]),o=Object(p.a)(i,2),s=o[0],d=o[1];return Object(n.useEffect)((function(){var t=(e.player.stake/e.totalStake*100).toFixed(1);l(t),function(){var t=Object(m.a)(u.a.mark((function t(){var a,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.services.filter((function(t){return t.consumer===e.player._id}));case 2:return a=t.sent,t.next=5,Promise.all(a.map(function(){var t=Object(m.a)(u.a.mark((function t(a){var n,r,c,l,i,o,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.consumer,r=a.provider,c=a.typeOfService,l=a.serviceTimestamp,i=a.timeForService,t.next=3,e.players.filter((function(e){return e._id===n}));case 3:return o=t.sent,t.next=6,e.players.filter((function(e){return e._id===r}));case 6:return s=t.sent,t.abrupt("return",{id:a._id,consumer:o[0].playerName,provider:s[0].playerName,typeOfService:c,serviceTimestamp:l,timeForService:i});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 5:n=t.sent,d(n);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"stats-grid"},r.a.createElement("div",{className:"grid-item-stats"},r.a.createElement("div",{className:"stats-image"},r.a.createElement("img",{src:I.a,alt:"balance"})),r.a.createElement("div",{className:"stats-value"},r.a.createElement("p",null,e.player.balance))),r.a.createElement("div",{className:"grid-item-stats"},r.a.createElement("div",{className:"time-value"},r.a.createElement("h2",null,e.player.typeOfService)),r.a.createElement("div",{className:"".concat(1===e.player.amountOfAvailableService?"time-value-available":"time-value-unavailable")},r.a.createElement("h2",null,1===e.player.amountOfAvailableService?"Available":"Unavailable")),r.a.createElement(_,null)),r.a.createElement("div",{className:"grid-item-stats"},r.a.createElement("div",{className:"stake-image"},r.a.createElement("img",{src:F.a,alt:"stake"})),r.a.createElement("div",{className:"stake-value"},r.a.createElement("p",null,e.player.stake)),r.a.createElement("div",{className:"stake-value"},r.a.createElement("p",null,"(",c,"%)"))),r.a.createElement("div",{className:"grid-item-stats"},r.a.createElement("div",{className:"upgrade-value"},r.a.createElement("h3",null,"Number of upgrades: ",e.player.upgradeNumber)),r.a.createElement("div",{className:"upgrade-container"},r.a.createElement("div",{className:"".concat(e.player.amountOfOtherService1>0?"upgrade-container-green":"upgrade-container-red")},r.a.createElement("p",null,"".concat(e.player.amountOfOtherService1)," \xd7 ","".concat(e.player.typeOfOtherService1))),r.a.createElement("div",null,r.a.createElement("p",null,"+")),r.a.createElement("div",{className:"".concat(e.player.amountOfOtherService2>0?"upgrade-container-green":"upgrade-container-red")},r.a.createElement("p",null,"".concat(e.player.amountOfOtherService2)," \xd7 ","".concat(e.player.typeOfOtherService2)))),r.a.createElement("div",{className:"upgrade-container"},r.a.createElement("div",{className:"upgrade-container-formula"},r.a.createElement("p",null,"".concat(e.player.typeOfOtherService1)," + ","".concat(e.player.typeOfOtherService2)," = \u21e9 ",function(e){var t=new Date(1e3*Math.round(e/1e3));return 0===t.getUTCMinutes()?t.getUTCSeconds()+"s":t.getUTCMinutes()+"min "+t.getUTCSeconds()+"s"}(e.player.timeForService-e.player.nextTimeForService)))))),r.a.createElement("div",{className:"services-container"},r.a.createElement("h3",null,"Purchased Services"),r.a.createElement("div",{className:"loading-services-container"},s.map((function(e){return r.a.createElement(A,{item:e,key:e.id})})))))},P=function(){var e=E(),t=e.gameData,a=e.isGameOn,c=e.setModalContent;return Object(n.useEffect)((function(){(function(){var e=Object(m.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=localStorage.getItem("auth-token"),n=localStorage.getItem("playerId"),null!==t&&""!==t||null!==n&&""!==n?a||c("Wait for the admin to start the game!"):c("Please log in!");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement("div",null,r.a.createElement("div",null,t.player?r.a.createElement("div",null,a?r.a.createElement("div",null,r.a.createElement("div",{className:"home-grid"},r.a.createElement("div",{className:"item-sidebar"},r.a.createElement(N,null)),r.a.createElement("div",{className:"item-content"},r.a.createElement(D,null)))):r.a.createElement(r.a.Fragment,null,r.a.createElement(w,null))):r.a.createElement(r.a.Fragment,null,r.a.createElement(w,null))))},U=a(294),B=a.n(U);function R(){var e=Object(n.useState)(),t=Object(p.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(),i=Object(p.a)(l,2),o=i[0],s=i[1],d=Object(n.useState)(!1),v=Object(p.a)(d,2),b=v[0],E=v[1],h=Object(f.f)(),g=function(){var e=Object(m.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),n={playerName:a,password:o},e.next=5,j.a.post("/player/login",n);case 5:r=e.sent,localStorage.setItem("auth-token",r.data.token),localStorage.setItem("playerId",r.data.id),h.push("/"),h.go(0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),void 0!==e.t0.response&&"Auth failed"===e.t0.response.data.message&&E(!0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{"Enter"===t.key&&g(t)}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"login-App"},r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"login-container"},r.a.createElement("div",{className:"login-base-container"},r.a.createElement("h3",null,"Login"),r.a.createElement("div",{className:"login-content"},r.a.createElement("div",{className:"login-image"},r.a.createElement("img",{src:B.a,alt:"login"})),r.a.createElement("div",{className:"login-form"},r.a.createElement("div",{className:"login-form-group"},r.a.createElement("label",{htmlFor:"playerName"},"Player name"),r.a.createElement("input",{type:"text",name:"playerName",placeholder:"Enter name",onChange:function(e){return c(e.target.value)},onKeyPress:function(e){return y(e)}})),r.a.createElement("div",{className:"login-form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",placeholder:"Enter password",onChange:function(e){return s(e.target.value)},onKeyPress:function(e){return y(e)}})))),r.a.createElement("div",{className:"".concat(b?"login-alert show-alert":"login-alert")},"The name or password is incorrect!"),r.a.createElement("div",{className:"login-footer"},r.a.createElement("button",{type:"button",className:"login-btn",onClick:g},"Log in"))))))}var L=a(295),z=function(e){var t=e.dataArray,a=e.modifiedData,n=e.checked,c=E(),l=c.gameData,i=c.openTradeModal,o=c.setTradeModalContent,s=c.openCancelOrderModal,u=c.setCancelOrderModalContent,m=function(e){var t=new Date(1e3*Math.round(e/1e3));return 0===t.getUTCMinutes()?t.getUTCSeconds()+"s":t.getUTCMinutes()+":"+t.getUTCSeconds()};return r.a.createElement(L.a,{data:a,onClick:function(e){return function(e){if(e.typeOfService!==l.player.typeOfService){var a=t.filter((function(t){return t._id===e._id}));Array.isArray(a)&&a.length&&(o(a[0]),i())}else if(e.playerName===l.player.playerName){var n=t.filter((function(t){return t._id===e._id}));Array.isArray(n)&&n.length&&(u(n[0]),s())}}(e.data)},onMouseEnter:function(e,t){return function(e,t){(e.typeOfService!==l.player.typeOfService||e.playerName===l.player.playerName)&&(t.target.style.cursor="pointer")}(e.data,t)},keys:function(){return n?["height"]:["price"]},indexBy:"playerName",margin:{top:10,right:20,bottom:50,left:70},padding:.25,valueScale:{type:"symlog"},theme:{fontSize:14,fontFamily:"Roboto, sans-serif",axis:{legend:{text:{fontSize:"16px",fontWeight:"bold",fontFamily:"Roboto, sans-serif"}}}},colors:function(e){return e.data.color},borderColor:{from:"color",modifiers:[["darker",1.6]]},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:n?"TIME FOR SERVICE":"PRICE",legendPosition:"middle",legendOffset:-50,tickValues:3},tooltip:function(e){var a=e.data;e.id;return r.a.createElement("strong",null,r.a.createElement("p",null,"Price - ",a.playerName,": ",function(e){var a=t.filter((function(t){return t._id===e._id}));if(Array.isArray(a)&&a.length)return a[0].price.toString()}(a)),r.a.createElement("p",null,"Time for service: ",function(e){var t=new Date(1e3*Math.round(e/1e3));return 0===t.getUTCMinutes()?t.getUTCSeconds()+"s":t.getUTCMinutes()+"min "+t.getUTCSeconds()+"s"}(a.timeForService)))},label:function(e){return function(e){var a=t.filter((function(t){return t._id===e._id}));if(Array.isArray(a)&&a.length)return n?m(a[0].timeForService):a[0].price.toString()}(e.data)},labelSkipWidth:12,labelSkipHeight:12,labelTextColor:"white",animate:!1,motionStiffness:90,motionDamping:15})},G=a(308),H=a.n(G),W=function(e){return r.a.createElement("div",{className:"toggle-switch"},r.a.createElement("div",{className:"toggle-switch-text"},"Price"),r.a.createElement(H.a,{onChange:function(t){e.onChange(t)},checked:e.checked,onColor:"#86d3ff",onHandleColor:"#2693e6",handleDiameter:30,uncheckedIcon:!1,checkedIcon:!1,boxShadow:"0px 1px 5px rgba(0, 0, 0, 0.6)",activeBoxShadow:"0px 0px 1px 10px rgba(0, 0, 0, 0.2)",height:20,width:48,className:"react-switch"}),r.a.createElement("div",{className:"toggle-switch-text"},"Time"))},Y=function(){var e=E().gameData,t=Object(n.useState)([]),a=Object(p.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)([]),s=Object(p.a)(i,2),d=s[0],f=s[1],v=Object(n.useState)([]),b=Object(p.a)(v,2),h=b[0],g=b[1],y=Object(n.useState)([]),O=Object(p.a)(y,2),k=O[0],x=O[1],j=Object(n.useState)([]),S=Object(p.a)(j,2),N=S[0],w=S[1],C=Object(n.useState)([]),I=Object(p.a)(C,2),T=I[0],F=I[1],_=Object(n.useState)(!1),M=Object(p.a)(_,2),A=M[0],D=M[1],P=Object(n.useState)(!1),U=Object(p.a)(P,2),B=U[0],R=U[1],L=Object(n.useState)(!1),G=Object(p.a)(L,2),H=G[0],Y=G[1],V=function(e){return(e/6e4).toFixed(2)};return Object(n.useEffect)((function(){(function(){var t=Object(m.a)(u.a.mark((function t(){var a,n,r,c,i,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.orders.filter((function(t){return t.typeOfService===e.player.typeOfOtherService1}));case 2:return a=t.sent,t.next=5,e.orders.filter((function(t){return t.typeOfService===e.player.typeOfOtherService2}));case 5:return n=t.sent,t.next=8,e.orders.filter((function(t){return t.typeOfService===e.player.typeOfService}));case 8:if(r=t.sent,!A){t.next=19;break}return t.next=12,a.forEach((function(e){e.price=parseInt(e.price),e.color="#1E90FF"}));case 12:return t.next=14,a.sort((function(e,t){return e.timeForService-t.timeForService}));case 14:return t.next=16,a.forEach((function(e){e.height=V(e.timeForService)}));case 16:l(a),t.next=24;break;case 19:return t.next=21,a.forEach((function(e){e.price=parseInt(e.price),e.color="#1E90FF"}));case 21:return t.next=23,a.sort((function(e,t){return e.price-t.price}));case 23:l(a);case 24:if(!B){t.next=34;break}return t.next=27,n.forEach((function(e){e.price=parseInt(e.price),e.color="green"}));case 27:return t.next=29,n.sort((function(e,t){return e.timeForService-t.timeForService}));case 29:return t.next=31,n.forEach((function(e){e.height=V(e.timeForService)}));case 31:f(n),t.next=39;break;case 34:return t.next=36,n.forEach((function(e){e.price=parseInt(e.price),e.color="green"}));case 36:return t.next=38,n.sort((function(e,t){return e.price-t.price}));case 38:f(n);case 39:if(!H){t.next=49;break}return t.next=42,r.forEach((function(t){t.price=parseInt(t.price),t.playerName===e.player.playerName?t.color="#FFD700":t.color="#FF8C00"}));case 42:return t.next=44,r.sort((function(e,t){return e.timeForService-t.timeForService}));case 44:return t.next=46,r.forEach((function(e){e.height=V(e.timeForService)}));case 46:g(r),t.next=54;break;case 49:return t.next=51,r.forEach((function(t){t.price=parseInt(t.price),t.playerName===e.player.playerName?t.color="#FFD700":t.color="#FF8C00"}));case 51:return t.next=53,r.sort((function(e,t){return e.price-t.price}));case 53:g(r);case 54:return t.next=56,a.map((function(e){return e.price<1?Object(o.a)(Object(o.a)({},e),{},{price:.9}):Object(o.a)({},e)}));case 56:return c=t.sent,t.next=59,n.map((function(e){return e.price<1?Object(o.a)(Object(o.a)({},e),{},{price:.9}):Object(o.a)({},e)}));case 59:return i=t.sent,t.next=62,r.map((function(e){return e.price<1?Object(o.a)(Object(o.a)({},e),{},{price:.9}):Object(o.a)({},e)}));case 62:s=t.sent,x(c),w(i),F(s);case 66:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e,A,B,H]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"trades-container"},r.a.createElement("div",{className:"other-services-trade-container"},r.a.createElement("div",{className:"chart-container"},r.a.createElement("div",{className:"chart-container-text"},r.a.createElement("h3",null,"".concat(e.player.typeOfOtherService1))),r.a.createElement(W,{checked:A,onChange:function(e){D(e)}}),r.a.createElement("div",{className:"chart-container-chart"},r.a.createElement(z,{dataArray:c,modifiedData:k,checked:A}))),r.a.createElement("div",{className:"chart-container"},r.a.createElement("div",{className:"chart-container-text"},r.a.createElement("h3",null,"".concat(e.player.typeOfOtherService2))),r.a.createElement(W,{checked:B,onChange:function(e){R(e)}}),r.a.createElement("div",{className:"chart-container-chart"},r.a.createElement(z,{dataArray:d,modifiedData:N,checked:B})))),r.a.createElement("div",{className:"my-service-trade-container"},r.a.createElement("div",{className:"chart-container"},r.a.createElement("div",{className:"chart-container-text"},r.a.createElement("h3",null,"".concat(e.player.typeOfService))),r.a.createElement(W,{checked:H,onChange:function(e){Y(e)}}),r.a.createElement("div",{className:"chart-container-chart"},r.a.createElement(z,{dataArray:h,modifiedData:T,checked:H}))))))},V=function(){var e=E(),t=e.gameData,a=e.isTradeModalOpen,c=e.closeTradeModal,l=e.tradeModalContent,i=Object(n.useState)("0"),o=Object(p.a)(i,2),s=o[0],d=o[1],f=Object(n.useState)(!1),v=Object(p.a)(f,2),b=v[0],h=v[1],g=Object(n.useState)(""),y=Object(p.a)(g,2),k=y[0],x=y[1],S=Object(n.useState)([]),N=Object(p.a)(S,2),w=N[0],C=N[1],I=function(){var e=Object(m.a)(u.a.mark((function e(){var a,n,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,void 0!==s&&""!==s){e.next=6;break}x("You must enter a value"),h(!0),e.next=33;break;case 6:if(!(isNaN(s)||s<0)){e.next=11;break}x("Input cannot be a negative number"),h(!0),e.next=33;break;case 11:if(o=s,!((Math.floor(o).toString()===o?0:o.toString().split(".")[1].length||0)>0)){e.next=16;break}x("Input value must be an integer"),h(!0),e.next=33;break;case 16:if(!(parseInt(l.price)+parseInt(s)>t.player.balance)){e.next=21;break}x("Price and TxFee is higher than balance"),h(!0),e.next=33;break;case 21:return a=localStorage.getItem("auth-token"),n=localStorage.getItem("playerId"),r={orderId:l._id,txFee:s},i={headers:{Authorization:"Bearer "+a}},e.next=27,j.a.post("/player/createTransaction/".concat(n),r,i);case 27:e.sent,c(),x(""),h(!1),d(),document.getElementById("inputHolder").value="";case 33:e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),void 0!==e.t0.response&&"Trade already exists"===e.t0.response.data.message&&(x("Trade with this person already exists"),h(!0));case 38:case"end":return e.stop()}var o}),e,null,[[0,35]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{""===t.target.value?d("0"):d(t.target.value)}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){(function(){var e=Object(m.a)(u.a.mark((function e(){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.allPendingTransactions.sort((function(e,t){return t.txFee-e.txFee}));case 2:return a=e.sent,e.next=5,Promise.all(a.map(function(){var e=Object(m.a)(u.a.mark((function e(a){var n,r,c,l,i,o,s,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.consumer,r=a.provider,c=a.typeOfService,l=a.amountOfService,i=a.price,o=a.txFee,e.next=3,t.players.filter((function(e){return e._id===n}));case 3:return s=e.sent,e.next=6,t.players.filter((function(e){return e._id===r}));case 6:if(m=e.sent,Array.isArray(m)&&m.length){e.next=9;break}return e.abrupt("return",{id:a._id,consumer:s[0].playerName,provider:"Blockchain",typeOfService:c,amountOfService:l,price:i,txFee:o,type:"cancel transaction"});case 9:return e.abrupt("return",{id:a._id,consumer:s[0].playerName,provider:m[0].playerName,typeOfService:c,amountOfService:l,price:i,txFee:o,type:"cancel transaction"});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:n=e.sent,C(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var F=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{"Enter"===t.key&&I()}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"".concat(a?"modal-confirm-overlay show-modal-confirm":"modal-confirm-overlay")},r.a.createElement("div",{className:"modal-confirm-container"},r.a.createElement("h3",null,"Create Trade"),r.a.createElement("div",{className:"modal-confirm-container-data"},r.a.createElement("div",{className:"modal-confirm-container-input"},r.a.createElement("ul",null,r.a.createElement("li",null,"Player: ",l.playerName),r.a.createElement("li",null,"typeOfService: ",l.typeOfService),r.a.createElement("li",null,"price: ",l.price)),r.a.createElement("div",{className:"trade-modal-input-group"},r.a.createElement("label",{htmlFor:"txFee"},"Tx Fee"),r.a.createElement("div",{className:"trade-modal-input-group-container"},r.a.createElement("input",{type:"text",name:"txFee",id:"inputHolder",placeholder:"Enter tx fee",onChange:function(e){return T(e)},onKeyPress:function(e){return F(e)}}))),r.a.createElement("div",{className:"".concat(b?"trade-modal-input-alert show-trade-modal-input-alert":"trade-modal-input-alert")},k)),r.a.createElement("div",{className:"trade-modal-table-container"},r.a.createElement("table",{className:"modal-table-pending-transactions"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"table-pending-transactions-head"},"No."),r.a.createElement("th",{className:"table-pending-transactions-head"},"Pending transactions"),r.a.createElement("th",{className:"table-pending-transactions-head"},"Tx Fee"))),r.a.createElement("tbody",null,w.map((function(e,t){return r.a.createElement("tr",{key:e.id,"data-tip":!0,"data-for":e.id},r.a.createElement("td",null,r.a.createElement("strong",null,t+1)),r.a.createElement("td",null,e.consumer," \u21c6 ",e.provider),r.a.createElement("td",null,e.txFee))})))))),r.a.createElement("button",{className:"close-modal-btn",onClick:function(){c(),x(""),h(!1),d(),document.getElementById("inputHolder").value=""}},r.a.createElement(O.h,null)),r.a.createElement("button",{className:"confirm-modal-btn",onClick:I},"Confirm")))},q=function(){var e=E(),t=e.isCancelOrderModalOpen,a=e.closeCancelOrderModal,c=e.cancelOrderModalContent,l=function(){var e=Object(m.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("auth-token"),n=localStorage.getItem("playerId"),e.next=5,j.a.delete("/player/cancelOrder/".concat(n),{headers:{Authorization:"Bearer "+t},data:{orderId:c._id}});case 5:e.sent,a(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),i=function(e){try{"Enter"===e.key&&l()}catch(t){console.log(t)}};return Object(n.useEffect)((function(){return document.addEventListener("keydown",(function(e){return i(e)})),function(){document.removeEventListener("keydown",(function(e){return i(e)}))}}),[c]),r.a.createElement("div",{className:"".concat(t?"modal-confirm-overlay show-modal-confirm":"modal-confirm-overlay")},r.a.createElement("div",{className:"modal-confirm-container"},r.a.createElement("h3",null,"Are you sure you want to cancel offer:"),r.a.createElement("ul",null,r.a.createElement("li",null,"Player: ",c.playerName),r.a.createElement("li",null,"typeOfService: ",c.typeOfService),r.a.createElement("li",null,"price: ",c.price)),r.a.createElement("button",{className:"close-modal-btn",onClick:a},r.a.createElement(O.h,null)),r.a.createElement("button",{className:"confirm-modal-btn",onClick:l},"Confirm")))},K=function(){var e=E(),t=e.gameData,a=e.isGameOn,c=e.setModalContent;return Object(n.useEffect)((function(){(function(){var e=Object(m.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=localStorage.getItem("auth-token"),n=localStorage.getItem("playerId"),""!==t&&""!==n?a||c("Wait for the admin to start the game!"):c("Please log in!");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement("div",null,r.a.createElement("div",null,t.player?r.a.createElement("div",null,a?r.a.createElement("div",null,r.a.createElement("div",{className:"home-grid"},r.a.createElement("div",{className:"item-sidebar"},r.a.createElement(N,null)),r.a.createElement("div",{className:"item-content"},r.a.createElement(Y,null))),r.a.createElement(V,null),r.a.createElement(q,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement(w,null))):r.a.createElement(r.a.Fragment,null,r.a.createElement(w,null))))},J=a(309),X=function(e){e.dataWithArc;var t=e.centerX,a=e.centerY,n=E().gameData.totalStake;return r.a.createElement("text",{x:t,y:a,textAnchor:"middle",dominantBaseline:"central",style:{fontSize:"25px",fontWeight:"500"}},n)},Q=function(e){var t=e.data;return r.a.createElement(J.a,{data:t,theme:{fontSize:16,fontFamily:"Roboto, sans-serif",axis:{legend:{text:{fontSize:"16px",fontWeight:"bold",fontFamily:"Roboto, sans-serif"}}}},margin:{top:20,right:20,bottom:20,left:20},innerRadius:.3,padAngle:1,cornerRadius:3,colors:{scheme:"yellow_orange_red"},borderWidth:1,borderColor:{from:"color",modifiers:[["darker",.2]]},enableRadialLabels:!1,sliceLabelsSkipAngle:10,sliceLabelsTextColor:"#333333",sortByValue:!0,layers:["slices","sliceLabels",X]})},Z=function(){var e=E().gameData,t=Object(n.useState)(""),a=Object(p.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(0),o=Object(p.a)(i,2),s=o[0],d=o[1];function f(e){var t=new Date(1e3*Math.round(e/1e3));return 0===t.getUTCMinutes()?t.getUTCSeconds()+"s":t.getUTCMinutes()+"min "+t.getUTCSeconds()+"s"}return function(e,t){var a=Object(n.useRef)();Object(n.useEffect)((function(){a.current=e}),[e]),Object(n.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return function(){return clearInterval(e)}}}),[t])}(Object(m.a)(u.a.mark((function t(){var a,n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Date(e.miningTime).getTime();case 2:return a=t.sent,n=1e4-(Date.now()-a),t.next=6,Math.floor(100*(1-(Date.now()-a)/1e4));case 6:((r=t.sent)<0||n<0)&&(r=0,n=0),l(f(n)),d(r);case 10:case"end":return t.stop()}}),t)}))),50),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mining-progress-container"},r.a.createElement("div",{className:"mining-progress-flex"},r.a.createElement("p",null,"Mining"),r.a.createElement("div",{className:"mining-progress"},r.a.createElement("div",{className:"mining-progress-filler",style:{width:"".concat(s,"%")}}))),r.a.createElement("span",{className:"mining-progress-text"},"Time left: ",c)))},$=function(){var e=E(),t=e.gameData,a=e.openConfirmModal,c=e.setConfirmModalContent,l=Object(n.useState)([]),i=Object(p.a)(l,2),o=i[0],s=i[1],d=Object(n.useState)(""),f=Object(p.a)(d,2),v=(f[0],f[1]),b=Object(n.useState)(0),h=Object(p.a)(b,2),g=(h[0],h[1]);function y(e){var t=new Date(1e3*Math.round(e/1e3));return 0===t.getUTCMinutes()?t.getUTCSeconds()+"s":t.getUTCMinutes()+"min "+t.getUTCSeconds()+"s"}return Object(n.useEffect)((function(){(function(){var e=Object(m.a)(u.a.mark((function e(){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.allPendingTransactions.sort((function(e,t){return parseInt(t.txFee)-parseInt(e.txFee)}));case 2:return a=e.sent,e.next=5,Promise.all(a.map(function(){var e=Object(m.a)(u.a.mark((function e(a){var n,r,c,l,i,o,s,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.consumer,r=a.provider,c=a.typeOfService,l=a.amountOfService,i=a.price,o=a.txFee,e.next=3,t.players.filter((function(e){return e._id===n}));case 3:return s=e.sent,e.next=6,t.players.filter((function(e){return e._id===r}));case 6:if(m=e.sent,Array.isArray(m)&&m.length){e.next=9;break}return e.abrupt("return",{id:a._id,consumer:s[0].playerName,provider:"Blockchain",typeOfService:c,amountOfService:l,price:i,txFee:o,type:"cancel transaction"});case 9:return e.abrupt("return",{id:a._id,consumer:s[0].playerName,provider:m[0].playerName,typeOfService:c,amountOfService:l,price:i,txFee:o,type:"cancel transaction"});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:n=e.sent,s(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),function(){var e=Object(m.a)(u.a.mark((function e(){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Date(t.miningTime).getTime();case 2:return a=e.sent,n=1e4-(Date.now()-a),e.next=6,Math.floor(100*(1-(Date.now()-a)/1e4));case 6:((r=e.sent)<0||n<0)&&(r=0,n=0),v(y(n)),g(r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pending-transactions-container"},r.a.createElement(Z,null),r.a.createElement("div",{className:"table-pending-transactions-container"},r.a.createElement("table",{className:"table-pending-transactions"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"table-pending-transactions-head"},"No."),r.a.createElement("th",{className:"table-pending-transactions-head"},"Pending transactions"),r.a.createElement("th",{className:"table-pending-transactions-head"},"Tx Fee"))),r.a.createElement("tbody",null,o.map((function(e,n){return r.a.createElement("tr",{key:e.id,"data-tip":!0,"data-for":e.id,style:{background:"".concat(e.consumer===t.player.playerName||e.provider===t.player.playerName?"#fffd6c":"")}},r.a.createElement("td",null,r.a.createElement("strong",null,n+1)),r.a.createElement("td",null,e.consumer," \u21c6 ",e.provider,e.consumer===t.player.playerName?r.a.createElement("button",{className:"cancel-transaction-btn",onClick:function(){(e.consumer===t.player.playerName||e.provider===t.player.playerName)&&(c(e),a())}},r.a.createElement(O.h,null)):""),r.a.createElement("td",null,e.txFee),r.a.createElement("td",{className:"table-pending-transactions-tooltip"},r.a.createElement(M.a,{id:e.id,place:"bottom",type:"dark",effect:"solid"},r.a.createElement("ul",null,r.a.createElement("li",null,"Consumer: ",e.consumer),r.a.createElement("li",null,"Provider: ",e.provider),r.a.createElement("li",null,"typeOfService: ",e.typeOfService),r.a.createElement("li",null,"price: ",e.price)))))})))))))},ee=function(){var e=E().gameData,t=Object(n.useState)([]),a=Object(p.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)("time"),s=Object(p.a)(i,2),d=s[0],f=s[1],v=Object(n.useState)("ascending"),b=Object(p.a)(v,2),h=b[0],g=b[1],y=Object(n.useState)([{type:"Mechanical service",isChecked:!1},{type:"Electrical service",isChecked:!1},{type:"IT service",isChecked:!1},{type:"Stake",isChecked:!1},{type:"Unstake",isChecked:!1}]),k=Object(p.a)(y,2),x=k[0],j=k[1],S=function(){var e=Object(m.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Date(t);case 2:return a=e.sent,e.abrupt("return",a.toLocaleTimeString("it-IT"));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("time"!==d){e.next=4;break}return e.next=3,t.sort((function(e,t){var a=e.createdAt.split(":"),n=60*parseInt(a[0],10)*60+60*parseInt(a[1],10)+parseInt(a[2],10),r=t.createdAt.split(":"),c=60*parseInt(r[0],10)*60+60*parseInt(r[1],10)+parseInt(r[2],10);return"descending"===h?c-n:"ascending"===h?n-c:void 0}));case 3:return e.abrupt("return",e.sent);case 4:if("consumer"!==d){e.next=8;break}return e.next=7,t.sort((function(e,t){var a=e.consumer.toUpperCase(),n=t.consumer.toUpperCase();return"descending"===h?a<n?-1:a>n?1:0:"ascending"===h?a>n?-1:a<n?1:0:void 0}));case 7:return e.abrupt("return",e.sent);case 8:if("provider"!==d){e.next=12;break}return e.next=11,t.sort((function(e,t){var a=e.provider.toUpperCase(),n=t.provider.toUpperCase();return"descending"===h?a<n?-1:a>n?1:0:"ascending"===h?a>n?-1:a<n?1:0:void 0}));case 11:return e.abrupt("return",e.sent);case 12:if("typeOfService"!==d){e.next=16;break}return e.next=15,t.sort((function(e,t){var a=e.typeOfService.toUpperCase(),n=t.typeOfService.toUpperCase();return"descending"===h?a<n?-1:a>n?1:0:"ascending"===h?a>n?-1:a<n?1:0:void 0}));case 15:return e.abrupt("return",e.sent);case 16:if("price"!==d){e.next=25;break}if("descending"!==h){e.next=21;break}return e.next=20,t.sort((function(e,t){return parseInt(t.price)-parseInt(e.price)}));case 20:return e.abrupt("return",e.sent);case 21:if("ascending"!==h){e.next=25;break}return e.next=24,t.sort((function(e,t){return parseInt(e.price)-parseInt(t.price)}));case 24:return e.abrupt("return",e.sent);case 25:if("txFee"!==d){e.next=34;break}if("descending"!==h){e.next=30;break}return e.next=29,t.sort((function(e,t){return parseInt(t.txFee)-parseInt(e.txFee)}));case 29:return e.abrupt("return",e.sent);case 30:if("ascending"!==h){e.next=34;break}return e.next=33,t.sort((function(e,t){return parseInt(e.txFee)-parseInt(t.txFee)}));case 33:return e.abrupt("return",e.sent);case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.name,n=t.target.checked,e.next=4,x.map((function(e){return e.type===a?Object(o.a)(Object(o.a)({},e),{},{isChecked:n}):e}));case 4:r=e.sent,j(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.filter((function(e){return e.isChecked}));case 2:return a=e.sent,e.next=5,a.map((function(e){return e.type}));case 5:if(n=e.sent,Array.isArray(n)&&n.length){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",t.filter((function(e){return n.includes(e.typeOfService)})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){(function(){var t=Object(m.a)(u.a.mark((function t(){var a,n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.allTransactions.map(function(){var t=Object(m.a)(u.a.mark((function t(a){var n,r,c,l,i,o,s,m,p,d;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.consumer,r=a.provider,c=a.typeOfService,l=a.amountOfService,i=a.price,o=a.txFee,s=a.createdAt,t.next=3,e.players.filter((function(e){return e._id===n}));case 3:return m=t.sent,t.next=6,e.players.filter((function(e){return e._id===r}));case 6:return p=t.sent,t.next=9,S(s);case 9:if(d=t.sent,Array.isArray(p)&&p.length){t.next=12;break}return t.abrupt("return",{id:a._id,consumer:m[0].playerName,provider:"Blockchain",typeOfService:c,amountOfService:l,price:i,txFee:o,type:"cancel transaction",createdAt:d});case 12:return t.abrupt("return",{id:a._id,consumer:m[0].playerName,provider:p[0].playerName,typeOfService:c,amountOfService:l,price:i,txFee:o,type:"cancel transaction",createdAt:d});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:return a=t.sent,t.next=5,C(a);case 5:return n=t.sent,t.next=8,N(n);case 8:r=t.sent,l(r);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e,x,h]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-all-transactions-container"},r.a.createElement("div",{className:"filter-all-transactions"},x.map((function(e){return r.a.createElement("label",{className:"checkbox-container",key:e.type},e.type,r.a.createElement("input",{type:"checkbox",name:e.type,checked:e.isChecked,onChange:w}),r.a.createElement("span",{className:"checkmark"}))}))),r.a.createElement("div",{className:"table-all-transactions-overflow"},r.a.createElement("table",{className:"table-all-transactions"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{onClick:function(){f("time"),"ascending"===h&&g("descending"),"descending"===h&&g("ascending")}},"Time ","time"===d?"ascending"===h?r.a.createElement(O.b,null):r.a.createElement(O.a,null):""),r.a.createElement("th",{onClick:function(){f("consumer"),"ascending"===h&&g("descending"),"descending"===h&&g("ascending")}},"Consumer ","consumer"===d?"ascending"===h?r.a.createElement(O.b,null):r.a.createElement(O.a,null):""),r.a.createElement("th",{onClick:function(){f("provider"),"ascending"===h&&g("descending"),"descending"===h&&g("ascending")}},"Provider ","provider"===d?"ascending"===h?r.a.createElement(O.b,null):r.a.createElement(O.a,null):""),r.a.createElement("th",{onClick:function(){f("typeOfService"),"ascending"===h&&g("descending"),"descending"===h&&g("ascending")}},"Type of service ","typeOfService"===d?"ascending"===h?r.a.createElement(O.b,null):r.a.createElement(O.a,null):""),r.a.createElement("th",{onClick:function(){f("price"),"ascending"===h&&g("descending"),"descending"===h&&g("ascending")}},"Price/Amount ","price"===d?"ascending"===h?r.a.createElement(O.b,null):r.a.createElement(O.a,null):""),r.a.createElement("th",{onClick:function(){f("txFee"),"ascending"===h&&g("descending"),"descending"===h&&g("ascending")}},"Tx Fee ","txFee"===d?"ascending"===h?r.a.createElement(O.b,null):r.a.createElement(O.a,null):""))),r.a.createElement("tbody",null,c.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.createdAt),r.a.createElement("td",null,e.consumer),r.a.createElement("td",null,e.provider),r.a.createElement("td",null,e.typeOfService),r.a.createElement("td",null,e.price),r.a.createElement("td",null,e.txFee))})))))))},te=function(){var e=E().gameData,t=Object(n.useState)([]),a=Object(p.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(0),o=Object(p.a)(i,2),s=o[0],d=o[1],f=Object(n.useState)("0"),v=Object(p.a)(f,2),b=v[0],h=v[1],g=Object(n.useState)("0"),y=Object(p.a)(g,2),O=y[0],k=y[1],x=Object(n.useState)(!1),S=Object(p.a)(x,2),N=S[0],w=S[1],C=Object(n.useState)(""),I=Object(p.a)(C,2),T=I[0],F=I[1],_=function(e){return Math.floor(e).toString()===e?0:e.toString().split(".")[1].length||0},M=function(){var t=Object(m.a)(u.a.mark((function t(){var a,n,r,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,void 0!==O&&""!==O&&void 0!==b&&""!==b){t.next=6;break}F("You must enter a value"),w(!0),t.next=34;break;case 6:if(!(isNaN(O)||O<0||isNaN(b)||b<0)){t.next=11;break}F("Amount and tx fee cannot be a negative number"),w(!0),t.next=34;break;case 11:if(!(_(O)>0||_(b)>0)){t.next=16;break}F("Input value must be an integer"),w(!0),t.next=34;break;case 16:if(!(parseInt(b)+parseInt(O)>e.player.balance)){t.next=21;break}F("Amount + TxFee is bigger than balance"),w(!0),t.next=34;break;case 21:return a=localStorage.getItem("auth-token"),n=localStorage.getItem("playerId"),r={stake:b,txFee:O},c={headers:{Authorization:"Bearer "+a}},t.next=27,j.a.post("/player/stake/".concat(n),r,c);case 27:t.sent,h("0"),F(""),w(!1),k("0"),document.getElementById("inputHolder").value="",document.getElementById("amountHolder").value="";case 34:t.next=39;break;case 36:t.prev=36,t.t0=t.catch(0),console.log(t.t0);case 39:case"end":return t.stop()}}),t,null,[[0,36]])})));return function(){return t.apply(this,arguments)}}(),A=function(){var t=Object(m.a)(u.a.mark((function t(){var a,n,r,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,void 0!==O&&""!==O&&void 0!==b&&""!==b){t.next=6;break}F("You must enter a value"),w(!0),t.next=34;break;case 6:if(!(isNaN(O)||O<0||isNaN(b)||b<=0)){t.next=11;break}F("Amount and tx fee cannot be a negative number"),w(!0),t.next=34;break;case 11:if(!(_(O)>0||_(b)>0)){t.next=16;break}F("Input value must be an integer"),w(!0),t.next=34;break;case 16:if(!(parseInt(b)+1>e.player.stake)){t.next=21;break}F("Amount is bigger than your stake (minimum value is 1)"),w(!0),t.next=34;break;case 21:return a=localStorage.getItem("auth-token"),n=localStorage.getItem("playerId"),r={unstake:b,txFee:O},c={headers:{Authorization:"Bearer "+a}},t.next=27,j.a.post("/player/unstake/".concat(n),r,c);case 27:t.sent,h("0"),F(""),w(!1),k("0"),document.getElementById("inputHolder").value="",document.getElementById("amountHolder").value="";case 34:t.next=39;break;case 36:t.prev=36,t.t0=t.catch(0),console.log(t.t0);case 39:case"end":return t.stop()}}),t,null,[[0,36]])})));return function(){return t.apply(this,arguments)}}(),D=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{""===t.target.value?h("0"):h(t.target.value)}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{""===t.target.value?k("0"):k(t.target.value)}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){(function(){var t=Object(m.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.players.map((function(e){return{id:e.playerName,value:e.stake}}));case 2:a=t.sent,l(a);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()();var t=(e.player.stake/e.totalStake*100).toFixed(1);d(t)}),[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"blockchain-container"},r.a.createElement("div",{className:"blockchain-info-container"},r.a.createElement($,null),r.a.createElement("div",{className:"piechart-container"},r.a.createElement("div",{className:"piechart-container-text"},r.a.createElement("h3",null,"Blockchain - stake"),r.a.createElement("h4",null,"Your stake: ",e.player.stake," (",s,"%)")),r.a.createElement("div",{className:"piechart-container-chart-stake"},r.a.createElement("div",{className:"piechart-container-chart"},r.a.createElement(Q,{data:c})),r.a.createElement("div",{className:"stake-input-container"},r.a.createElement("div",{className:"modal-input-group"},r.a.createElement("label",{htmlFor:"Amount"},"Amount"),r.a.createElement("div",{className:"modal-input-group-container"},r.a.createElement("input",{style:{backgroundColor:"#dbdbdb"},type:"text",name:"amount",id:"amountHolder",placeholder:"Enter amount",onChange:function(e){return D(e)}}))),r.a.createElement("div",{className:"modal-input-group"},r.a.createElement("label",{htmlFor:"txFee"},"Tx Fee"),r.a.createElement("div",{className:"modal-input-group-container"},r.a.createElement("input",{style:{backgroundColor:"#dbdbdb"},type:"text",name:"txFee",id:"inputHolder",placeholder:"Enter tx fee",onChange:function(e){return P(e)}}))),r.a.createElement("div",{className:"".concat(N?"modal-input-alert show-modal-input-alert":"modal-input-alert")},T),r.a.createElement("button",{className:"confirm-stake-btn",onClick:function(){return M()}},"Stake"),r.a.createElement("button",{className:"confirm-unstake-btn",onClick:function(){return A()}},"Unstake"))))),r.a.createElement("div",{className:"all-transactions-container"},r.a.createElement("h3",null,"Transactions History"),r.a.createElement(ee,null))))},ae=function(){var e=E(),t=e.isConfirmModalOpen,a=e.closeConfirmModal,c=e.confirmModalContent,l=function(){var e=Object(m.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=localStorage.getItem("auth-token"),n=localStorage.getItem("playerId"),"cancel transaction"!==c.type){e.next=8;break}return e.next=7,j.a.delete("/player/cancelTransaction/".concat(n),{headers:{Authorization:"Bearer "+t},data:{transactionId:c.id}});case 7:e.sent;case 8:a(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),i=function(e){try{"Enter"===e.key&&l()}catch(t){console.log(t)}};return Object(n.useEffect)((function(){return document.addEventListener("keydown",(function(e){return i(e)})),function(){document.removeEventListener("keydown",(function(e){return i(e)}))}}),[c]),r.a.createElement("div",{className:"".concat(t?"modal-confirm-overlay show-modal-confirm":"modal-confirm-overlay")},r.a.createElement("div",{className:"modal-confirm-container"},r.a.createElement("h3",null,"Are you sure you want to ",c.type,":"),r.a.createElement("ul",null,r.a.createElement("li",null,"Consumer: ",c.consumer),r.a.createElement("li",null,"Provider: ",c.provider),r.a.createElement("li",null,"typeOfService: ",c.typeOfService),r.a.createElement("li",null,"price: ",c.price),r.a.createElement("li",null,"txFee: ",c.txFee)),r.a.createElement("button",{className:"close-modal-btn",onClick:a},r.a.createElement(O.h,null)),r.a.createElement("button",{className:"confirm-modal-btn",onClick:l},"Confirm")))},ne=function(){var e=E(),t=e.gameData,a=e.isGameOn,c=e.setModalContent;return Object(n.useEffect)((function(){(function(){var e=Object(m.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=localStorage.getItem("auth-token"),n=localStorage.getItem("playerId"),""!==t&&""!==n?a||c("Wait for the admin to start the game!"):c("Please log in!");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement("div",null,r.a.createElement("div",null,t.player?r.a.createElement("div",null,a?r.a.createElement("div",null,r.a.createElement("div",{className:"home-grid"},r.a.createElement("div",{className:"item-sidebar"},r.a.createElement(N,null)),r.a.createElement("div",{className:"item-content"},r.a.createElement(te,null))),r.a.createElement(ae,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement(w,null))):r.a.createElement(r.a.Fragment,null,r.a.createElement(w,null))))},re=function(){var e=E().gameData,t=Object(n.useState)([]),a=Object(p.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){(function(){var t=Object(m.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.players.sort((function(e,t){return parseInt(t.upgradeNumber)===parseInt(e.upgradeNumber)?parseInt(t.balance)+parseInt(t.stake)-(parseInt(e.balance)+parseInt(e.stake)):parseInt(t.upgradeNumber)-parseInt(e.upgradeNumber)}));case 2:a=t.sent,l(a);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"ranking-container"},r.a.createElement("div",{className:"table-all-transactions-container"},r.a.createElement("h2",null,"Players Ranking"),r.a.createElement("div",{className:"table-ranking"},r.a.createElement("table",{className:"table-all-rankings"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Rank"),r.a.createElement("th",null,"Player"),r.a.createElement("th",null,"Type of service"),r.a.createElement("th",null,"Number of upgrades"),r.a.createElement("th",null,"Balance"),r.a.createElement("th",null,"Stake"),r.a.createElement("th",null,"Revenue from trade"),r.a.createElement("th",null,"Revenue from stake"))),r.a.createElement("tbody",null,c.map((function(t,a){return r.a.createElement("tr",{key:t._id,style:{background:"".concat(t.playerName===e.player.playerName?"#fffd6c":"")}},r.a.createElement("td",null,r.a.createElement("strong",null,a+1)),r.a.createElement("td",null,t.playerName),r.a.createElement("td",null,t.typeOfService),r.a.createElement("td",null,t.upgradeNumber),r.a.createElement("td",null,t.balance),r.a.createElement("td",null,t.stake),r.a.createElement("td",null,t.fromServiceBalance),r.a.createElement("td",null,t.fromStakeBalance))}))))))))},ce=function(){var e=E(),t=e.gameData,a=e.isGameOn,c=e.setModalContent;return Object(n.useEffect)((function(){(function(){var e=Object(m.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=localStorage.getItem("auth-token"),n=localStorage.getItem("playerId"),null!==t&&""!==t||null!==n&&""!==n?a||c("Wait for the admin to start the game!"):c("Please log in!");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement("div",null,r.a.createElement("div",null,t.player?r.a.createElement("div",null,a?r.a.createElement("div",null,r.a.createElement("div",{className:"home-grid"},r.a.createElement("div",{className:"item-sidebar"},r.a.createElement(N,null)),r.a.createElement("div",{className:"item-content"},r.a.createElement(re,null)))):r.a.createElement(r.a.Fragment,null,r.a.createElement(w,null))):r.a.createElement(r.a.Fragment,null,r.a.createElement(w,null))))},le=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Ups something went wrong!"))};j.a.defaults.baseURL="https://sharedmanufacturing.ldse.si:8000";var ie=function(){var e=E(),t=e.setIsGameOn,a=e.isGameOn,c=e.setGameData,l=e.gameData,s=e.openAlert,v=Object(n.useState)(),b=Object(p.a)(v,2),g=b[0],O=b[1],k=Object(n.useCallback)((function(){try{var e=localStorage.getItem("playerId"),t=g.id;g.emit("query",t,e)}catch(a){void 0!==a.response&&"Auth failed"===a.response.data.message&&(localStorage.setItem("auth-token",""),localStorage.setItem("playerId",""),window.location.reload(!1))}}),[g]),x=Object(n.useCallback)(function(){var e=Object(m.a)(u.a.mark((function e(a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=localStorage.getItem("auth-token"),c({token:n,player:a.player,orders:a.orders,allPendingTransactions:a.allPendingTransactions,services:a.services,totalStake:a.totalStake,players:a.players,allTransactions:a.allTransactions,miningTime:a.miningTime}),t(a.isGameOn)}catch(r){console.log(r)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c,t]),j=Object(n.useCallback)(function(){var e=Object(m.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t(!0),c((function(e){var t=Object(o.a)({},e);return t.miningTime=a,t}))}catch(n){console.log(n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l,c,t]),S=Object(n.useCallback)(Object(m.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t(!1)}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)}))),[t]),N=Object(n.useCallback)(function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c((function(e){var a=Object(o.a)({},e);return a.orders.push(t),a}))}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),w=Object(n.useCallback)(function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c((function(e){var a=Object(o.a)({},e);return a.orders=a.orders.filter((function(e){return e._id!==t})),a}))}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l,c]),C=Object(n.useCallback)(function(){var e=Object(m.a)(u.a.mark((function e(t,a,n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c((function(e){var c=Object(o.a)({},e);if(c.player._id===a){c.player.balance=parseInt(t);var l=c.players.findIndex((function(e){return e._id===a})),s=Object(i.a)(c.players);"stake"===n?(c.player.fromStakeBalance=parseInt(r),s[l]=Object(o.a)(Object(o.a)({},s[l]),{},{balance:parseInt(t),fromStakeBalance:parseInt(r)})):"trade"===n?(c.player.fromServiceBalance=parseInt(r),s[l]=Object(o.a)(Object(o.a)({},s[l]),{},{balance:parseInt(t),fromServiceBalance:parseInt(r)})):s[l]=Object(o.a)(Object(o.a)({},s[l]),{},{balance:parseInt(t)}),c.players=s}else{var u=c.players.findIndex((function(e){return e._id===a})),m=Object(i.a)(c.players);m[u]="stake"===n?Object(o.a)(Object(o.a)({},m[u]),{},{balance:parseInt(t),fromStakeBalance:parseInt(r)}):"trade"===n?Object(o.a)(Object(o.a)({},m[u]),{},{balance:parseInt(t),fromServiceBalance:parseInt(r)}):Object(o.a)(Object(o.a)({},m[u]),{},{balance:parseInt(t)}),c.players=m}return c}))}catch(l){console.log(l)}case 1:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),[l]),I=Object(n.useCallback)(function(){var e=Object(m.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c((function(e){var n=Object(o.a)({},e);return n.allPendingTransactions.filter((function(e){return e._id===t}))[0].consumer!==n.player._id||a||s(),n.allPendingTransactions=n.allPendingTransactions.filter((function(e){return e._id!==t})),n}))}catch(n){console.log(n)}case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[l,c]),T=Object(n.useCallback)(function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c((function(e){if(e.allPendingTransactions.some((function(e){return e._id===t._id})))return Object(o.a)({},e);var a=Object(o.a)({},e);return a.allPendingTransactions.push(t),a}))}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l]),F=Object(n.useCallback)(function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c((function(e){var a=Object(o.a)({},e);return a.services.push(t),a}))}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),_=Object(n.useCallback)(function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c((function(e){var a=Object(o.a)({},e);return a.services=a.services.filter((function(e){return e._id!==t})),a}))}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l,c]),M=Object(n.useCallback)(function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c((function(e){var a=Object(o.a)({},e);return a.player.amountOfAvailableService=parseInt(t),a}))}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l]),A=Object(n.useCallback)(function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c((function(e){var a=Object(o.a)({},e);return a.player.amountOfOtherService1=parseInt(t),a}))}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l]),D=Object(n.useCallback)(function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c((function(e){var a=Object(o.a)({},e);return a.player.amountOfOtherService2=parseInt(t),a}))}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l]),U=Object(n.useCallback)(function(){var e=Object(m.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c((function(e){var n=Object(o.a)({},e);if(n.player._id===t){n.player.stake=parseInt(a);var r=n.players.findIndex((function(e){return e._id===t})),c=Object(i.a)(n.players);c[r]=Object(o.a)(Object(o.a)({},c[r]),{},{stake:parseInt(a)}),n.players=c,n.totalStake=c.reduce((function(e,t){return e+t.stake}),0)}else{var l=n.players.findIndex((function(e){return e._id===t})),s=Object(i.a)(n.players);s[l]=Object(o.a)(Object(o.a)({},s[l]),{},{stake:parseInt(a)}),n.players=s}return n}))}catch(n){console.log(n)}case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[l]),B=Object(n.useCallback)(function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c((function(e){var a=Object(o.a)({},e);return a.miningTime=parseInt(t),a}))}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l]),L=Object(n.useCallback)(function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c((function(e){var a=Object(o.a)({},e);return a.player.nextTimeForService=t,a.player.initialTimeForService=a.player.timeForService,a}))}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l]),z=Object(n.useCallback)(function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c((function(e){var a=Object(o.a)({},e);return a.player.serviceTimestamp=t,a}))}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l]),G=Object(n.useCallback)(function(){var e=Object(m.a)(u.a.mark((function e(t,a,n,r,l){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c((function(e){var c=Object(o.a)({},e);return c.player.timeForService=t,c.player.nextTimeForService=a,c.player.upgradeNumber=n,c.player.amountOfOtherService1=r,c.player.amountOfOtherService2=l,c}))}catch(i){console.log(i)}case 1:case"end":return e.stop()}}),e)})));return function(t,a,n,r,c){return e.apply(this,arguments)}}(),[l]),H=Object(n.useCallback)(function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c((function(e){var a=Object(o.a)({},e);return a.allTransactions.push(t),a}))}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l]),W=Object(n.useCallback)(function(){var e=Object(m.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c((function(e){var n=Object(o.a)({},e);if(n.player._id===t){n.player.upgradeNumber=a;var r=n.players.findIndex((function(e){return e._id===t})),c=Object(i.a)(n.players);c[r]=Object(o.a)(Object(o.a)({},c[r]),{},{upgradeNumber:a}),n.players=c}else{var l=n.players.findIndex((function(e){return e._id===t})),s=Object(i.a)(n.players);s[l]=Object(o.a)(Object(o.a)({},s[l]),{},{upgradeNumber:a}),n.players=s}return n}))}catch(n){console.log(n)}case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[l]);return Object(n.useEffect)((function(){(function(){var e=Object(m.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem("auth-token");case 2:return t=e.sent,e.next=5,localStorage.getItem("playerId");case 5:if(a=e.sent,(null===t||""===t)&&(null===a||""===a)){e.next=10;break}return n=Object(h.io)("https://sharedmanufacturing.ldse.si:8000",{query:{playerId:a},auth:{token:t}}),O(n),e.abrupt("return",(function(){return n.close()}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]),Object(n.useEffect)((function(){if(null!=g)return g.on("connect",k),g.on("data",x),g.on("start",j),g.on("end",S),g.on("create_order",N),g.on("delete_order",w),g.on("update_balance",C),g.on("delete_transaction",I),g.on("create_transaction",T),g.on("create_service",F),g.on("delete_service",_),g.on("update_available_service",M),g.on("update_other_service1",A),g.on("update_other_service2",D),g.on("update_stake",U),g.on("update_time",B),g.on("initial_time",L),g.on("update_service_time",z),g.on("update_production",G),g.on("add_allTransaction",H),g.on("update_upgrade",W),function(){g.off("connect"),g.off("data"),g.off("start"),g.off("end"),g.off("create_order"),g.off("delete_order"),g.off("update_balance"),g.off("delete_transaction"),g.off("create_transaction"),g.off("create_service"),g.off("delete_service"),g.off("update_available_service"),g.off("update_other_service1"),g.off("update_other_service2"),g.off("update_stake"),g.off("update_time"),g.off("initial_time"),g.off("update_service_time"),g.off("update_production"),g.off("add_allTransaction"),g.off("update_upgrade")}}),[g,l,k,x,j,S,N,w,C,I,T,F,_,M,A,D,U,B,L,z,G,H,W]),r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null,r.a.createElement(y,null),r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:"/",component:P}),r.a.createElement(f.a,{path:"/login",component:R}),r.a.createElement(f.a,{path:"/trade",component:K}),r.a.createElement(f.a,{path:"/blockchain",component:ne}),r.a.createElement(f.a,{path:"/ranking",component:ce}),r.a.createElement(f.a,{path:"*",component:le}))))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(b,null,r.a.createElement(ie,null))),document.getElementById("root"))}},[[324,1,2]]]);
//# sourceMappingURL=main.5ac090f4.chunk.js.map